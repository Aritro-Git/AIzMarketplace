<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>AIz Marketplace — Playground</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css"/>

  <!-- GTM -->
  <script>
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});
    var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';
    j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-XXXXXXX');
  </script>

  <!-- Clarity -->
  <script>
    (function(c,l,a,r,i,t,y){c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
    t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
    y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);})
    (window,document,"clarity","script","CLARITY_PROJECT_ID");
  </script>

  <style>
    .pgWrap{margin-top:18px; display:grid; grid-template-columns: 0.8fr 1.2fr; gap:18px;}
    .panel{border-radius:26px;border:1px solid rgba(255,255,255,.09);background:rgba(255,255,255,.02);backdrop-filter:blur(14px);padding:16px;}
    .crumbs{display:flex;gap:10px;align-items:center;color:rgba(230,237,247,.6);font-size:13px;margin-top:14px}
    .crumbs a{color:rgba(230,237,247,.8)}
    .sel{width:100%;padding:12px 14px;border-radius:14px;background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.1);color:#e6edf7}
    .ta{width:100%;min-height:140px;padding:14px;border-radius:16px;background:rgba(0,0,0,.35);border:1px solid rgba(255,255,255,.1);color:#e6edf7}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .chip{font-size:12px;padding:8px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.1);background:rgba(255,255,255,.02)}
    .resp{min-height:220px;border-radius:16px;background:rgba(0,0,0,.35);border:1px solid rgba(255,255,255,.1);padding:14px}
    .muted{color:rgba(230,237,247,.6);font-size:13px}
    @media(max-width:980px){.pgWrap{grid-template-columns:1fr}}
  </style>
</head>

<body>
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-XXXXXXX"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<canvas id="stars"></canvas>

<header class="topbar">
  <div class="brand">AIz<span>Marketplace</span></div>
  <nav class="navlinks">
    <a href="index.html">Agents</a>
    <a href="agent.html?id=advision">Docs</a>
    <a href="playground.html" class="active">Playground</a>
    <a href="#about">About</a>
    <a href="#start" class="cta">Start →</a>
  </nav>
</header>

<main class="container">
  <div class="crumbs">
    <a href="index.html">Marketplace</a><span>›</span><span>Playground</span>
  </div>

  <section class="pgWrap">
    <!-- LEFT -->
    <div class="panel">
      <h2>Try an agent</h2>
      <p class="muted">Choose an agent, give it context, see how it responds.</p>

      <label class="muted">Agent</label>
      <select id="agentSel" class="sel"></select>

      <label class="muted" style="margin-top:10px">Task / prompt</label>
      <textarea id="prompt" class="ta" placeholder="e.g. Create a LinkedIn ad for a B2B SaaS targeting RevOps leaders"></textarea>

      <div class="row" style="margin-top:10px">
        <button id="runBtn" class="btn primary">Run →</button>
        <a href="agent.html?id=advision" class="btn">View agent</a>
        <a href="index.html" class="btn">Back to catalogue</a>
      </div>

      <div class="row" style="margin-top:10px">
        <span class="chip">Demo mode</span>
        <span class="chip">No API calls</span>
        <span class="chip">Tracked events</span>
      </div>
    </div>

    <!-- RIGHT -->
    <div class="panel">
      <h3>Response</h3>
      <div id="response" class="resp muted">Run the agent to see a simulated response.</div>
    </div>
  </section>

  <footer class="footer" style="margin-top:18px">
    <a href="#">Security</a> · <a href="#">Privacy</a> · <a href="#">Contact</a>
  </footer>
</main>

<script>
  const qs=new URLSearchParams(location.search);
  const preset=qs.get("id");

  function pushEvent(event,params={}){window.dataLayer=window.dataLayer||[];window.dataLayer.push({event,...params});}

  async function init(){
    const res=await fetch("data/agents.json",{cache:"no-cache"});
    const agents=await res.json();
    const sel=document.getElementById("agentSel");
    agents.forEach(a=>{
      const o=document.createElement("option");
      o.value=a.id;o.textContent=`${a.name} — ${a.category}`;
      sel.appendChild(o);
    });
    if(preset){sel.value=preset}

    pushEvent("playground_view",{});
  }

  document.getElementById("runBtn").onclick=()=>{
    const agent=document.getElementById("agentSel").value;
    const prompt=document.getElementById("prompt").value.trim();
    const out=document.getElementById("response");

    out.textContent="Thinking…";
    setTimeout(()=>{
      out.innerHTML=
        `<strong>Simulated output</strong><br><br>
        This agent analysed your prompt and generated a tailored response.
        In production, this would call the agent API and stream results here.`;
      pushEvent("playground_run",{agent_id:agent,has_prompt:!!prompt});
    },900);
  };

  init();
</script>
</body>
</html>
